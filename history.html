<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="View historical salary data - Skywage Cabin Crew Salary Calculator">
    <title>Skywage - Statistics</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <!-- Include Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Include Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Authentication check script -->
    <script>
        // Check if user is authenticated (for demo purposes)
        // In a real app, this would validate a token with the backend
        function checkAuthentication() {
            // For demo purposes, we'll use sessionStorage
            // In production, you would verify a JWT token or session cookie
            const isAuthenticated = sessionStorage.getItem('isAuthenticated') === 'true';

            // If not authenticated, redirect to sign-in
            if (!isAuthenticated) {
                window.location.href = 'sign-in.html';
            }
        }

        // Run the check when the page loads
        checkAuthentication();

        // For testing purposes, set authentication to true
        sessionStorage.setItem('isAuthenticated', 'true');
        sessionStorage.setItem('userPosition', 'sccm');
        sessionStorage.setItem('userEmail', 'test@example.com');
    </script>
</head>
<body style="margin: 0; padding: 0; overflow-x: hidden;">
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="sidebar-logo">
                <i class="fas fa-plane"></i>
            </div>
            <nav class="sidebar-menu">
                <a href="index.html" class="sidebar-menu-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="history.html" class="sidebar-menu-item active">
                    <i class="fas fa-chart-bar"></i>
                    <span>Statistics</span>
                </a>
                <a href="profile.html" class="sidebar-menu-item">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
                <a href="#" class="sidebar-menu-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <a href="#" class="sidebar-menu-item">
                    <i class="fas fa-question-circle"></i>
                    <span>Help</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <a href="#" id="sign-out-button">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sign Out</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-content">
            <header class="dashboard-header">
                <h1 class="dashboard-title">Statistics</h1>
                <div class="dashboard-user">
                    <div class="dashboard-user-info">
                        <div class="dashboard-user-name" id="user-name">Welcome back!</div>
                        <div class="dashboard-user-role" id="user-email">user@example.com</div>
                    </div>
                    <div class="dashboard-user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </header>

            <!-- Monthly Charts Section (Moved from Dashboard) -->
            <div class="chart-grid mb-6">
                <!-- Monthly Salary Chart -->
                <div class="chart-card">
                    <div class="chart-card-header">
                        <div class="chart-card-title">Monthly Salary</div>
                        <div class="chart-card-actions">
                            <button class="chart-card-action">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-blue-600 rounded-t-md" style="height: 60px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Jan</div>
                            <div class="text-xs text-gray-400">12,156</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-blue-600 rounded-t-md" style="height: 70px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Feb</div>
                            <div class="text-xs text-gray-400">12,704</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-blue-600 rounded-t-md" style="height: 80px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Mar</div>
                            <div class="text-xs text-gray-400">13,392</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-blue-600 rounded-t-md" style="height: 75px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Apr</div>
                            <div class="text-xs text-gray-400">11,688</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-blue-600 rounded-t-md" style="height: 90px;"></div>
                            <div class="text-xs mt-1 text-gray-500">May</div>
                            <div class="text-xs text-gray-400">14,044</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-blue-600 rounded-t-md" style="height: 65px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Jun</div>
                            <div class="text-xs text-gray-400">12,926</div>
                        </div>
                    </div>
                </div>

                <!-- Flight Hours Chart -->
                <div class="chart-card">
                    <div class="chart-card-header">
                        <div class="chart-card-title">Flight Hours</div>
                        <div class="chart-card-actions">
                            <button class="chart-card-action">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-green-500 rounded-t-md" style="height: 60px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Jan</div>
                            <div class="text-xs text-gray-400">63.5</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-green-500 rounded-t-md" style="height: 80px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Feb</div>
                            <div class="text-xs text-gray-400">80.5</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-green-500 rounded-t-md" style="height: 85px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Mar</div>
                            <div class="text-xs text-gray-400">85.5</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-green-500 rounded-t-md" style="height: 90px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Apr</div>
                            <div class="text-xs text-gray-400">90.0</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-green-500 rounded-t-md" style="height: 100px;"></div>
                            <div class="text-xs mt-1 text-gray-500">May</div>
                            <div class="text-xs text-gray-400">100.5</div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-12 bg-green-500 rounded-t-md" style="height: 75px;"></div>
                            <div class="text-xs mt-1 text-gray-500">Jun</div>
                            <div class="text-xs text-gray-400">74.5</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Month Selection -->
            <div class="chart-card mb-6">
                <div class="chart-card-header">
                    <div class="chart-card-title">Select Month</div>
                </div>
                <div class="p-4">
                    <div class="flex flex-wrap gap-2">
                        <button class="px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">January 2023</button>
                        <button class="px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">February 2023</button>
                        <button class="px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">March 2023</button>
                        <button class="px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">April 2023</button>
                        <button class="px-4 py-2 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">May 2023</button>
                        <button class="px-4 py-2 bg-blue-600 text-white rounded-md">June 2023</button>
                    </div>
                </div>
            </div>

            <!-- Monthly Comparison Chart -->
            <div class="chart-card mb-6">
                <div class="chart-card-header">
                    <div class="chart-card-title">Monthly Earnings Comparison</div>
                </div>
                <div class="p-4">
                    <div class="h-80">
                        <!-- Monthly Comparison Chart -->
                        <div class="h-full flex items-end justify-between">
                            <div class="flex flex-col items-center">
                                <div class="w-16 bg-blue-600 rounded-t-md" style="height: 60%;"></div>
                                <div class="text-xs mt-1 text-gray-500">Jan</div>
                                <div class="text-xs text-gray-400">12,156 AED</div>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 bg-blue-600 rounded-t-md" style="height: 70%;"></div>
                                <div class="text-xs mt-1 text-gray-500">Feb</div>
                                <div class="text-xs text-gray-400">12,704 AED</div>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 bg-blue-600 rounded-t-md" style="height: 80%;"></div>
                                <div class="text-xs mt-1 text-gray-500">Mar</div>
                                <div class="text-xs text-gray-400">13,392 AED</div>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 bg-blue-600 rounded-t-md" style="height: 75%;"></div>
                                <div class="text-xs mt-1 text-gray-500">Apr</div>
                                <div class="text-xs text-gray-400">11,688 AED</div>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 bg-blue-600 rounded-t-md" style="height: 90%;"></div>
                                <div class="text-xs mt-1 text-gray-500">May</div>
                                <div class="text-xs text-gray-400">14,044 AED</div>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 bg-blue-600 rounded-t-md" style="height: 65%;"></div>
                                <div class="text-xs mt-1 text-gray-500">Jun</div>
                                <div class="text-xs text-gray-400">12,926 AED</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Earnings Breakdown -->
            <div class="chart-grid mb-6">
                <!-- Year-to-Date Earnings -->
                <div class="chart-card">
                    <div class="chart-card-header">
                        <div class="chart-card-title">Year-to-Date Earnings</div>
                    </div>
                    <div class="p-4">
                        <div class="flex flex-col items-center">
                            <div class="text-3xl font-bold text-blue-600 mb-2">76,910 AED</div>
                            <div class="text-sm text-gray-500">Total earnings in 2023</div>

                            <div class="w-full mt-6">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-500">Basic Salary</span>
                                    <span class="font-medium">51,000 AED</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-3">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 66%;"></div>
                                </div>

                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-500">Flight Pay</span>
                                    <span class="font-medium">25,910 AED</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mb-3">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 34%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Monthly Trends -->
                <div class="chart-card">
                    <div class="chart-card-header">
                        <div class="chart-card-title">Monthly Trends</div>
                    </div>
                    <div class="p-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-50 p-3 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Avg. Monthly Salary</div>
                                <div class="text-xl font-bold text-gray-800">12,818 AED</div>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Highest Month</div>
                                <div class="text-xl font-bold text-gray-800">14,044 AED</div>
                                <div class="text-xs text-gray-500">May 2023</div>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Avg. Flight Hours</div>
                                <div class="text-xl font-bold text-gray-800">82.5 hrs</div>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                                <div class="text-sm text-gray-500 mb-1">Total Flights</div>
                                <div class="text-xl font-bold text-gray-800">124</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Monthly Flight Details -->
            <div class="table-card mb-6">
                <div class="table-card-header">
                    <div class="table-card-title">June 2023 Flights</div>
                </div>
                <div class="table-container">
                    <table class="dashboard-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Flight</th>
                                <th>Route</th>
                                <th>Hours</th>
                                <th>Pay</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>21 Jun</td>
                                <td>FZ123</td>
                                <td>DXB - IKA</td>
                                <td>5.5h</td>
                                <td>550 AED</td>
                            </tr>
                            <tr>
                                <td>19 Jun</td>
                                <td>FZ456</td>
                                <td>DXB - KHI</td>
                                <td>4.0h</td>
                                <td>400 AED</td>
                            </tr>
                            <tr>
                                <td>15 Jun</td>
                                <td>FZ789</td>
                                <td>DXB - AMM</td>
                                <td>3.5h</td>
                                <td>350 AED</td>
                            </tr>
                            <tr>
                                <td>10 Jun</td>
                                <td>FZ234</td>
                                <td>DXB - DOH</td>
                                <td>2.5h</td>
                                <td>250 AED</td>
                            </tr>
                            <tr>
                                <td>05 Jun</td>
                                <td>FZ567</td>
                                <td>DXB - MCT</td>
                                <td>2.0h</td>
                                <td>200 AED</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center text-gray-500 text-sm mt-10 pt-6 border-t border-gray-200">
                <div class="flex justify-center items-center">
                    <i class="fas fa-plane text-blue-400 mr-2"></i>
                    <span>Â© 2025 Skywage - Cabin Crew Salary Calculator</span>
                </div>
                <div class="mt-2 text-xs text-gray-400">
                    <a href="#" class="text-blue-500 hover:text-blue-700 transition-colors">Privacy Policy</a> |
                    <a href="#" class="text-blue-500 hover:text-blue-700 transition-colors">Terms of Service</a>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript files -->
    <script src="js/auth.js"></script>
    <script src="js/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/dataProcessing.js"></script>
    <script src="js/components/flightDetailsTable.js"></script>
    <script src="js/components/flightDetailsCards.js"></script>
    <script src="js/components/monthlySummary.js"></script>
    <script src="js/components/salaryBreakdown.js"></script>
    <script src="js/components/deleteConfirmation.js"></script>
    <script src="js/components/manualFlightEntry.js"></script>
    <script src="js/multiMonthData.js"></script>
    <script src="js/components/multiMonthVisualizations.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set user email
            const userEmail = sessionStorage.getItem('userEmail');
            const userEmailElement = document.getElementById('user-email');
            if (userEmailElement && userEmail) {
                userEmailElement.textContent = userEmail;
            }

            // Sign out button
            const signOutButton = document.getElementById('sign-out-button');
            if (signOutButton) {
                signOutButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    sessionStorage.removeItem('isAuthenticated');
                    sessionStorage.removeItem('userPosition');
                    sessionStorage.removeItem('userEmail');
                    window.location.href = 'sign-in.html';
                });
            }

            // Load multi-month data
            const multiMonthData = JSON.parse(localStorage.getItem('multiMonthData')) || {};

            // Month selection buttons
            const monthButtons = document.querySelectorAll('.chart-card button');
            monthButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    monthButtons.forEach(btn => {
                        btn.classList.remove('bg-blue-600', 'text-white');
                        btn.classList.add('bg-gray-100');
                    });

                    // Add active class to clicked button
                    this.classList.remove('bg-gray-100');
                    this.classList.add('bg-blue-600', 'text-white');

                    // Here you would normally update the displayed data based on the selected month
                    // For demo purposes, we'll just show an alert
                    alert(`Selected month: ${this.textContent}`);
                });
            });
        });
    </script>
</body>
</html>
